<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>Markdown â†’ å…¬ä¼—å·æ ¼å¼è½¬æ¢å™¨</title>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            /* Twitter-like Palette (Light) */
            --bg-body: #F5F8FA;
            --bg-surface: #FFFFFF;
            --bg-hover: #E8F5FD;

            --primary: #1DA1F2;
            --primary-hover: #1A91DA;

            --text-primary: #0F1419;
            --text-secondary: #536471;
            --text-tertiary: #CFD9DE;

            --border-color: #CFD9DE;
            --border-hover: #1DA1F2;

            /* Component Specific Map */
            --panel-bg: var(--bg-surface);
            --panel-header-bg: var(--bg-surface);
            --panel-border: var(--border-color);

            --input-bg: var(--bg-surface);
            --preview-bg: var(--bg-surface);

            --btn-primary-bg: var(--primary);
            --btn-primary-text: #ffffff;

            --btn-secondary-bg: #EFF3F4;
            --btn-secondary-text: #0F1419;
            --btn-secondary-hover: #D7DBDC;

            --tab-bg: transparent;
            --tab-active-border: var(--primary);
            --tab-text: var(--text-secondary);
            --tab-active-text: var(--text-primary);

            /* Toast & Accents */
            --toast-bg: var(--primary);
            --code-bg: #F7F9F9;
            --code-color: #D63384;
            --highlight-bg: #E8F5FD;

            /* Shadows */
            --shadow-sm: 0 2px 5px rgba(0, 0, 0, 0.05);
            --shadow-md: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        body.dark {
            --panel-bg: #1e1e1e;
            --panel-header-bg: #252525;
            --panel-border: #3a3a3a;
            --text-primary: #e0e0e0;
            --text-secondary: #b0b0b0;
            --text-muted: #888;
            --input-bg: #2a2a2a;
            --preview-bg: #1e1e1e;
            --tab-bg: #2a2a2a;
            --tab-active-bg: #1e1e1e;
            --tab-active-color: #a8b4ff;
            --btn-primary-bg: linear-gradient(135deg, #5a6fd6 0%, #6a44a0 100%);
            --btn-success-bg: linear-gradient(135deg, #0d7d74 0%, #2bc968 100%);
            --btn-paste-bg: linear-gradient(135deg, #3d5a58 0%, #5a4a50 100%);
            --btn-paste-color: #e0e0e0;
            --toast-bg: linear-gradient(135deg, #0d7d74 0%, #2bc968 100%);
            --code-bg: #2d2d2d;
            --code-color: #ff79c6;
            --blockquote-bg: linear-gradient(135deg, #1a2a3a 0%, #1a2530 100%);
            --table-header-bg: #2a2a2a;
            --table-border: #444;
            --placeholder-color: #666;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background: var(--bg-body);
            color: var(--text-primary);
            min-height: 100vh;
            padding: 0;
            margin: 0;
            transition: background 0.3s ease, color 0.3s ease;
        }

        .container {
            max-width: 1600px;
            margin: 0 auto;
            height: calc(100vh - 40px);
            display: flex;
            flex-direction: column;
            padding: 0 20px;
        }

        header {
            text-align: center;
            color: var(--text-primary);
            margin: 0;
            padding: 24px 20px;
            background: var(--bg-surface);
            border-bottom: 1px solid var(--border-color);
        }

        header h1 {
            font-size: 24px;
            margin-bottom: 8px;
            font-weight: 800;
        }

        header p {
            color: var(--text-secondary);
            font-size: 15px;
        }

        .header-actions {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 16px;
            margin-top: 16px;
        }

        .author-link {
            color: var(--primary);
            font-weight: 600;
        }

        .author-link:hover {
            color: var(--primary-hover);
        }

        .theme-toggle {
            background: var(--btn-secondary-bg);
            color: var(--btn-secondary-text);
            padding: 8px 16px;
            border-radius: 9999px;
            /* Pill shape */
            font-weight: 600;
            font-size: 14px;
        }

        .theme-toggle:hover {
            background: var(--btn-secondary-hover);
        }

        /* Mobile Tab Navigation */
        .mobile-tabs {
            display: none;
            background: var(--panel-bg);
            border-radius: 12px 12px 0 0;
            overflow: hidden;
            transition: background 0.3s ease;
        }

        .mobile-tabs button {
            flex: 1;
            padding: 14px 20px;
            border: none;
            background: var(--tab-bg);
            font-size: 15px;
            font-weight: 600;
            color: var(--text-muted);
            cursor: pointer;
            transition: all 0.2s;
        }

        .mobile-tabs button.active {
            background: var(--tab-active-bg);
            color: var(--tab-active-color);
            box-shadow: 0 -2px 0 var(--tab-active-color) inset;
        }

        .editor-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 24px;
            /* Separation between panels */
            background: transparent;
            box-shadow: none;
            overflow: visible;
            flex: 1;
            padding: 24px 0;
            max-width: 1200px;
            margin: 0 auto;
            width: 100%;
        }

        .panel {
            display: flex;
            flex-direction: column;
            background: var(--panel-bg);
            border: 1px solid var(--panel-border);
            border-radius: 16px;
            overflow: hidden;
            box-shadow: var(--shadow-sm);
        }

        .panel-header {
            background: var(--panel-header-bg);
            padding: 12px 16px;
            border-bottom: 1px solid var(--panel-border);
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 10;
        }

        .panel-title {
            font-weight: 700;
            color: var(--text-primary);
            font-size: 16px;
        }

        .btn {
            padding: 8px 16px;
            border: none;
            border-radius: 9999px;
            /* Pill buttons */
            font-size: 14px;
            font-weight: 700;
            cursor: pointer;
            transition: background 0.2s;
        }

        .btn-primary {
            background: var(--btn-primary-bg);
            color: var(--btn-primary-text);
        }

        .btn-primary:hover {
            background: var(--primary-hover);
        }

        .btn-paste,
        .btn-secondary {
            background: var(--btn-secondary-bg);
            color: var(--btn-secondary-text);
        }

        .btn-paste:hover {
            background: var(--btn-secondary-hover);
            transform: none;
            box-shadow: none;
        }

        .btn-success {
            background: var(--primary);
            /* Use Primary Blue for main action */
            color: white;
        }

        .btn-success:hover {
            background: var(--primary-hover);
            transform: none;
            box-shadow: none;
        }

        #markdown-input {
            flex: 1;
            width: 100%;
            padding: 20px;
            border: none;
            resize: none;
            font-family: -apple-system, BlinkMacSystemFont, "SF Mono", Monaco, "Courier New", monospace;
            font-size: 15px;
            line-height: 1.6;
            color: var(--text-primary);
            background: var(--input-bg);
            -webkit-appearance: none;
            appearance: none;
            transition: background 0.3s ease, color 0.3s ease;
        }

        #markdown-input:focus {
            outline: none;
        }

        #markdown-input::placeholder {
            color: var(--placeholder-color);
        }

        .preview-panel {
            background: var(--panel-header-bg);
            border-left: 1px solid var(--panel-border);
            transition: background 0.3s ease;
        }

        #preview {
            flex: 1;
            padding: 24px;
            overflow-y: auto;
            min-height: 0;
            -webkit-overflow-scrolling: touch;
        }

        /* ========== å…¬ä¼—å·æ–‡ç« æ ·å¼ ========== */
        #preview {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            font-size: 16px;
            line-height: 1.8;
            color: var(--text-primary);
            background: var(--preview-bg);
            transition: background 0.3s ease, color 0.3s ease;
        }

        /* ä¸»æ ‡é¢˜æ ·å¼ - è“è‰² */
        #preview h2 {
            color: #2d8cf0;
            font-size: 20px;
            font-weight: bold;
            margin-top: 28px;
            margin-bottom: 16px;
            padding-bottom: 8px;
            border-bottom: 2px solid #2d8cf0;
        }

        #preview h2:first-child {
            margin-top: 0;
        }

        /* å­æ ‡é¢˜æ ·å¼ */
        #preview h3 {
            color: #333;
            font-size: 17px;
            font-weight: bold;
            margin-top: 24px;
            margin-bottom: 12px;
        }

        /* æ®µè½ */
        #preview p {
            margin: 12px 0;
        }

        /* å¼ºè°ƒæ–‡å­— */
        #preview strong {
            color: #333;
            font-weight: bold;
        }

        /* ç‹¬ç«‹çš„åŠ ç²—æ®µè½ä½œä¸ºé«˜äº®è¯­å¥ */
        #preview p>strong:only-child {
            display: block;
            color: #2d8cf0;
            font-size: 17px;
            text-align: center;
            padding: 12px 16px;
            margin: 16px 0;
            background: #f8fbff;
            border-radius: 6px;
        }

        /* åˆ—è¡¨æ ·å¼ */
        #preview ul,
        #preview ol {
            padding-left: 24px;
            margin: 12px 0;
        }

        #preview li {
            margin: 8px 0;
        }

        /* ä»£ç å—æ ·å¼ */
        #preview pre {
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 16px;
            border-radius: 8px;
            overflow-x: auto;
            font-family: "SF Mono", Monaco, "Courier New", monospace;
            font-size: 13px;
            line-height: 1.6;
            margin: 16px 0;
            -webkit-overflow-scrolling: touch;
        }

        #preview code {
            background: var(--code-bg);
            color: var(--code-color);
            padding: 2px 6px;
            border-radius: 4px;
            font-family: "SF Mono", Monaco, "Courier New", monospace;
            font-size: 14px;
            transition: background 0.3s ease, color 0.3s ease;
        }

        #preview pre code {
            background: none;
            color: inherit;
            padding: 0;
        }

        /* è¡¨æ ¼æ ·å¼ */
        #preview table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            font-size: 14px;
            display: block;
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
        }

        #preview th {
            background: #2d8cf0;
            color: white;
            padding: 10px;
            text-align: left;
            font-weight: bold;
            white-space: nowrap;
        }

        #preview td {
            padding: 8px 10px;
            border-bottom: 1px solid #e8e8e8;
            white-space: nowrap;
        }

        #preview tr:nth-child(even) {
            background: #f9f9f9;
        }

        /* å¼•ç”¨å—æ ·å¼ */
        #preview blockquote {
            background: linear-gradient(135deg, #e8f4fc 0%, #f0f9ff 100%);
            border-left: 4px solid #2d8cf0;
            border-radius: 8px;
            padding: 16px 20px;
            margin: 20px 0;
            position: relative;
        }

        #preview blockquote::before {
            content: '"';
            font-size: 48px;
            color: #2d8cf0;
            opacity: 0.3;
            position: absolute;
            top: 4px;
            left: 12px;
            font-family: Georgia, serif;
        }

        #preview blockquote p {
            margin: 0;
            padding-left: 24px;
        }

        /* åˆ†éš”çº¿ */
        #preview hr {
            border: none;
            height: 1px;
            background: linear-gradient(to right, transparent, #2d8cf0, transparent);
            margin: 28px 0;
        }

        /* é“¾æ¥æ ·å¼ */
        #preview a {
            color: #2d8cf0;
            text-decoration: none;
        }

        /* é€šçŸ¥æç¤º */
        .toast {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--toast-bg);
            color: white;
            padding: 14px 28px;
            border-radius: 12px;
            font-weight: 500;
            font-size: 15px;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.3);
            transition: opacity 0.3s ease, visibility 0.3s ease;
            z-index: 1000;
            white-space: nowrap;
            opacity: 0;
            visibility: hidden;
        }

        .toast.show {
            opacity: 1;
            visibility: visible;
        }

        /* ========== å¤§å±å¹•ä¼˜åŒ– ========== */
        @media (min-width: 1400px) {
            .container {
                max-width: 1800px;
            }

            .panel-header {
                padding: 16px 24px;
            }

            .panel-title {
                font-size: 16px;
            }

            .btn {
                padding: 12px 22px;
                font-size: 15px;
            }

            #markdown-input {
                padding: 24px;
                font-size: 16px;
            }

            #preview {
                padding: 28px;
            }
        }

        /* ========== ä¸­ç­‰å±å¹•ä¼˜åŒ– ========== */
        @media (min-width: 769px) and (max-width: 1200px) {
            .container {
                padding: 0 16px;
            }

            .editor-container {
                grid-template-columns: 1fr 1fr;
            }

            .btn {
                padding: 8px 14px;
                font-size: 13px;
            }

            .panel-title {
                font-size: 14px;
            }
        }

        /* ========== ç§»åŠ¨ç«¯å“åº”å¼ ========== */
        @media (max-width: 768px) {
            body {
                padding: 0;
                background: var(--bg-body);
            }

            .container {
                padding: 0;
                display: flex;
                flex-direction: column;
                height: 100vh;
                height: 100dvh;
            }

            header {
                margin-bottom: 12px;
                padding: 12px 16px 8px;
                flex-shrink: 0;
            }

            header h1 {
                font-size: 18px;
                margin-bottom: 4px;
            }

            header p {
                font-size: 12px;
                opacity: 0.85;
            }

            /* iOS Style Segmented Control / Twitter Tabs */
            .mobile-tabs {
                display: flex;
                margin: 0 0 16px;
                padding: 0;
                background: var(--bg-surface);
                border-bottom: 1px solid var(--border-color);
                border-radius: 0;
            }

            body.dark .mobile-tabs {
                background: var(--bg-surface);
            }

            .mobile-tabs button {
                flex: 1;
                padding: 12px 16px;
                border: none;
                background: transparent;
                font-size: 15px;
                font-weight: 700;
                color: var(--text-secondary);
                cursor: pointer;
                transition: color 0.2s ease;
                border-radius: 0;
                position: relative;
            }

            .mobile-tabs button.active {
                background: transparent;
                color: var(--text-primary);
                box-shadow: none;
            }

            .mobile-tabs button.active::after {
                content: '';
                position: absolute;
                bottom: 0;
                left: 50%;
                transform: translateX(-50%);
                width: 56px;
                /* Twitter style indicator width */
                height: 4px;
                background: var(--primary);
                border-radius: 99px;
            }

            .editor-container {
                display: block;
                /* Switch from grid to block for tabs */
                border-radius: 0;
                background: transparent;
                padding: 0;
                box-shadow: none;
            }

            .panel {
                display: none;
                border: none;
                border-radius: 0;
                box-shadow: none;
                background: transparent;
            }

            .panel.active {
                display: flex;
            }

            .panel-header {
                padding: 12px 16px;
                background: var(--panel-header-bg);
                border-bottom: 1px solid var(--panel-border);
                position: sticky;
                top: 0;
                z-index: 10;
            }

            .panel-title {
                display: none;
            }

            .panel-header .btn-group {
                display: flex;
                gap: 8px;
                width: 100%;
            }

            .panel-header .btn {
                flex: 1;
                text-align: center;
                padding: 12px 16px;
                font-size: 14px;
                border-radius: 10px;
            }

            /* è¾“å…¥åŒºåŸŸæ ·å¼ä¼˜åŒ– */
            #markdown-input {
                padding: 16px;
                font-size: 16px;
                line-height: 1.7;
                flex: 1;
                min-height: 0;
            }

            /* é¢„è§ˆåŒºåŸŸæ ·å¼ä¼˜åŒ– */
            .preview-panel {
                border-left: none;
            }

            #preview {
                padding: 16px;
                padding-bottom: 80px;
                /* ä¸ºåº•éƒ¨æŒ‰é’®ç•™ç©ºé—´ */
                max-height: none;
                flex: 1;
                overflow-y: auto;
                -webkit-overflow-scrolling: touch;
            }

            /* åº•éƒ¨å›ºå®šå¤åˆ¶æŒ‰é’® */
            .preview-panel .panel-header {
                position: fixed;
                top: auto;
                bottom: 0;
                left: 0;
                right: 0;
                border-top: 1px solid var(--panel-border);
                border-bottom: none;
                border-radius: 0;
                padding: 12px 16px;
                padding-bottom: calc(12px + env(safe-area-inset-bottom));
                background: var(--panel-bg);
                backdrop-filter: blur(10px);
                -webkit-backdrop-filter: blur(10px);
                box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.1);
            }

            .preview-panel .panel-header .btn {
                padding: 14px 20px;
                font-size: 15px;
                font-weight: 600;
            }

            /* è¾“å…¥é¢æ¿çš„æŒ‰é’®ä¿æŒé¡¶éƒ¨ */
            #panel-input .panel-header {
                position: sticky;
                bottom: auto;
                border-radius: 0;
                box-shadow: none;
            }

            /* Toast æç¤ºä¼˜åŒ– */
            .toast {
                top: auto;
                bottom: calc(80px + env(safe-area-inset-bottom));
                padding: 12px 20px;
                font-size: 14px;
                border-radius: 50px;
                background: var(--toast-bg);
                backdrop-filter: blur(10px);
                -webkit-backdrop-filter: blur(10px);
            }

            .toast.show {
                opacity: 1;
                visibility: visible;
            }

            /* æŒ‰é’®è§¦æ‘¸åé¦ˆ */
            .btn:active {
                transform: scale(0.97);
                opacity: 0.9;
            }

            .mobile-tabs button:active {
                opacity: 0.7;
            }
        }

        /* éå¸¸å°çš„å±å¹• (SE, å°å‹ Android) */
        @media (max-width: 380px) {
            header h1 {
                font-size: 16px;
            }

            header p {
                font-size: 11px;
            }

            .mobile-tabs {
                margin: 0 12px 6px;
            }

            .mobile-tabs button {
                padding: 8px 12px;
                font-size: 13px;
            }

            #markdown-input,
            #preview {
                padding: 12px;
                font-size: 15px;
            }

            .panel-header .btn {
                padding: 12px 16px;
                font-size: 14px;
            }
        }

        /* æ¨ªå±æ¨¡å¼ä¼˜åŒ– */
        @media (max-width: 768px) and (orientation: landscape) {
            header {
                padding: 8px 16px 4px;
                margin-bottom: 8px;
            }

            header h1 {
                font-size: 16px;
            }

            header p {
                display: none;
            }

            .mobile-tabs {
                margin-bottom: 6px;
            }

            .mobile-tabs button {
                padding: 8px 12px;
            }
        }

        /* ç²˜è´´æŒ‰é’®æ ·å¼ */
        .btn-paste {
            background: var(--btn-paste-bg);
            color: var(--btn-paste-color);
            transition: background 0.3s ease, color 0.3s ease;
        }

        .btn-paste:hover,
        .btn-paste:active {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(168, 237, 234, 0.4);
        }
    </style>
</head>

<body>
    <div class="container">
        <header>
            <h1>ğŸ“ Markdown â†’ å…¬ä¼—å·è½¬æ¢å™¨</h1>
            <p>ç²˜è´´ Markdown å†…å®¹ï¼Œè‡ªåŠ¨è½¬æ¢ä¸ºå…¬ä¼—å·å¯Œæ–‡æœ¬æ ¼å¼</p>
            <div class="header-actions">
                <button class="theme-toggle" id="theme-toggle" onclick="toggleTheme()">ğŸŒ™ å¤œé—´æ¨¡å¼</button>
                <a href="https://x.com/kinpoe_ray" target="_blank" class="author-link">@kinpoe_ray</a>
            </div>
        </header>

        <!-- Mobile Tab Navigation -->
        <div class="mobile-tabs">
            <button id="tab-input" class="active" onclick="switchTab('input')">ğŸ“„ è¾“å…¥</button>
            <button id="tab-preview" onclick="switchTab('preview')">ğŸ‘ï¸ é¢„è§ˆ</button>
        </div>

        <div class="editor-container">
            <!-- è¾“å…¥é¢æ¿ -->
            <div class="panel active" id="panel-input">
                <div class="panel-header">
                    <span class="panel-title">ğŸ“„ Markdown è¾“å…¥</span>
                    <div class="btn-group">
                        <button class="btn btn-paste" onclick="pasteFromClipboard()">ğŸ“‹ ç²˜è´´å†…å®¹</button>
                        <button class="btn btn-primary" onclick="clearInput()">ğŸ—‘ï¸ æ¸…ç©º</button>
                    </div>
                </div>
                <textarea id="markdown-input" placeholder="â† å·¦å³æ»‘åŠ¨åˆ‡æ¢ Tab

åœ¨è¿™é‡Œç²˜è´´ Markdown å†…å®¹...

æ”¯æŒçš„æ ¼å¼ç¤ºä¾‹ï¼š

## ä¸»æ ‡é¢˜ï¼ˆè“è‰²å¸¦ä¸‹åˆ’çº¿ï¼‰

### å­æ ‡é¢˜ï¼ˆé»‘è‰²åŠ ç²—ï¼‰

æ™®é€šæ®µè½æ–‡å­—ï¼Œæ”¯æŒ **åŠ ç²—** å’Œ *æ–œä½“* æ ·å¼ã€‚

**ç‹¬ç«‹åŠ ç²—å¥å­ä¼šå±…ä¸­é«˜äº®æ˜¾ç¤º**

- æ— åºåˆ—è¡¨é¡¹1
- æ— åºåˆ—è¡¨é¡¹2
- æ— åºåˆ—è¡¨é¡¹3

1. æœ‰åºåˆ—è¡¨é¡¹1
2. æœ‰åºåˆ—è¡¨é¡¹2
3. æœ‰åºåˆ—è¡¨é¡¹3

> å¼•ç”¨å—ä¼šæœ‰æ·¡è“è‰²èƒŒæ™¯å’Œå·¦ä¾§ç«–çº¿

`è¡Œå†…ä»£ç ` æœ‰èƒŒæ™¯è‰²

```python
# ä»£ç å—æœ‰æ·±è‰²èƒŒæ™¯
def hello():
    print('Hello WeChat!')
```

| è¡¨å¤´A | è¡¨å¤´B | è¡¨å¤´C |
|--------|--------|--------|
| å†…å®¹A1 | å†…å®¹B1 | å†…å®¹C1 |
| å†…å®¹A2 | å†…å®¹B2 | å†…å®¹C2 |

---

[é“¾æ¥æ–‡å­—](https://example.com)
"></textarea>
            </div>

            <!-- é¢„è§ˆé¢æ¿ -->
            <div class="panel preview-panel" id="panel-preview">
                <div class="panel-header">
                    <span class="panel-title">ğŸ‘ï¸ å…¬ä¼—å·é¢„è§ˆ</span>
                    <div class="btn-group">
                        <button class="btn btn-success" onclick="copyToClipboard()">ğŸ“‹ å¤åˆ¶åˆ°å…¬ä¼—å·</button>
                    </div>
                </div>
                <div id="preview">
                    <p style="color: #adb5bd; text-align: center; margin-top: 100px;">é¢„è§ˆåŒºåŸŸ<br>è¾“å…¥ Markdown
                        å†…å®¹åï¼Œè¿™é‡Œä¼šæ˜¾ç¤ºæ ¼å¼åŒ–æ•ˆæœ</p>
                </div>
            </div>
        </div>
    </div>

    <div class="toast" id="toast">âœ… å·²å¤åˆ¶ï¼ç²˜è´´åˆ°å…¬ä¼—å·å³å¯</div>

    <script>
        const input = document.getElementById('markdown-input');
        const preview = document.getElementById('preview');
        const toast = document.getElementById('toast');

        // é…ç½® marked
        marked.setOptions({
            breaks: true,
            gfm: true
        });

        // å®æ—¶è½¬æ¢
        input.addEventListener('input', () => {
            const markdown = input.value;
            if (markdown.trim()) {
                preview.innerHTML = marked.parse(markdown);
                // å¤„ç†åªåŒ…å«åŠ ç²—æ–‡æœ¬çš„æ®µè½ï¼Œä½¿å…¶æˆä¸ºé«˜äº®è¯­å¥
                processHighlightSentences();
            } else {
                preview.innerHTML = '<p style="color: #adb5bd; text-align: center; margin-top: 100px;">é¢„è§ˆåŒºåŸŸ<br>åœ¨å·¦ä¾§è¾“å…¥ Markdown å†…å®¹åï¼Œè¿™é‡Œä¼šæ˜¾ç¤ºæ ¼å¼åŒ–åçš„æ•ˆæœ</p>';
            }
        });

        // å¤„ç†é«˜äº®è¯­å¥
        function processHighlightSentences() {
            const paragraphs = preview.querySelectorAll('p');
            paragraphs.forEach(p => {
                // æ£€æŸ¥æ®µè½æ˜¯å¦åªåŒ…å«ä¸€ä¸ª <strong> å­å…ƒç´ 
                if (p.children.length === 1 && p.children[0].tagName === 'STRONG' && p.textContent.trim() === p.children[0].textContent.trim()) {
                    p.classList.add('highlight-sentence');
                }
            });
        }

        // æ¸…ç©ºè¾“å…¥
        function clearInput() {
            input.value = '';
            preview.innerHTML = '<p style="color: #adb5bd; text-align: center; margin-top: 100px;">é¢„è§ˆåŒºåŸŸ<br>åœ¨å·¦ä¾§è¾“å…¥ Markdown å†…å®¹åï¼Œè¿™é‡Œä¼šæ˜¾ç¤ºæ ¼å¼åŒ–åçš„æ•ˆæœ</p>';
        }

        // å¤åˆ¶åˆ°å‰ªè´´æ¿
        async function copyToClipboard() {
            try {
                // åˆ›å»ºä¸€ä¸ªä¸´æ—¶å®¹å™¨æ¥å¤åˆ¶å¯Œæ–‡æœ¬
                const tempContainer = document.createElement('div');
                tempContainer.innerHTML = preview.innerHTML;

                // æ·»åŠ å†…è”æ ·å¼ä»¥ç¡®ä¿æ ¼å¼åœ¨ç²˜è´´æ—¶ä¿æŒ
                applyInlineStyles(tempContainer);

                // ä½¿ç”¨ Clipboard API å¤åˆ¶ HTML
                const blob = new Blob([tempContainer.innerHTML], { type: 'text/html' });
                const clipboardItem = new ClipboardItem({
                    'text/html': blob,
                    'text/plain': new Blob([preview.innerText], { type: 'text/plain' })
                });

                await navigator.clipboard.write([clipboardItem]);

                // æ˜¾ç¤ºæˆåŠŸæç¤º
                showToast();
            } catch (err) {
                // é™çº§æ–¹æ¡ˆï¼šä½¿ç”¨ä¼ ç»Ÿçš„å¤åˆ¶æ–¹æ³•
                const range = document.createRange();
                range.selectNodeContents(preview);
                const selection = window.getSelection();
                selection.removeAllRanges();
                selection.addRange(range);
                document.execCommand('copy');
                selection.removeAllRanges();
                showToast();
            }
        }

        // æ·»åŠ å†…è”æ ·å¼
        function applyInlineStyles(container) {
            // H2 æ ·å¼
            container.querySelectorAll('h2').forEach(el => {
                el.style.cssText = 'color: #2d8cf0; font-size: 20px; font-weight: bold; margin-top: 28px; margin-bottom: 16px; padding-bottom: 8px; border-bottom: 2px solid #2d8cf0;';
            });

            // H3 æ ·å¼
            container.querySelectorAll('h3').forEach(el => {
                el.style.cssText = 'color: #333; font-size: 17px; font-weight: bold; margin-top: 24px; margin-bottom: 12px;';
            });

            // æ®µè½æ ·å¼
            container.querySelectorAll('p').forEach(el => {
                el.style.cssText = 'margin: 12px 0; line-height: 1.8;';
            });

            // é«˜äº®è¯­å¥æ ·å¼
            container.querySelectorAll('p.highlight-sentence, p > strong:only-child').forEach(el => {
                if (el.tagName === 'P') {
                    el.style.cssText = 'text-align: center; margin: 16px 0;';
                    if (el.firstChild && el.firstChild.tagName === 'STRONG') {
                        el.firstChild.style.cssText = 'color: #2d8cf0; font-size: 17px; display: block; padding: 12px 16px; background: #f8fbff; border-radius: 6px;';
                    }
                }
            });

            // åˆ—è¡¨æ ·å¼
            container.querySelectorAll('ul, ol').forEach(el => {
                el.style.cssText = 'padding-left: 24px; margin: 12px 0;';
            });

            container.querySelectorAll('li').forEach(el => {
                el.style.cssText = 'margin: 8px 0; line-height: 1.8;';
            });

            // ä»£ç å—æ ·å¼
            container.querySelectorAll('pre').forEach(el => {
                el.style.cssText = 'background: #1e1e1e; color: #d4d4d4; padding: 16px; border-radius: 8px; overflow-x: auto; font-family: "SF Mono", Monaco, "Courier New", monospace; font-size: 14px; line-height: 1.6; margin: 16px 0;';
            });

            // è¡Œå†…ä»£ç æ ·å¼
            container.querySelectorAll('code').forEach(el => {
                if (el.parentElement.tagName !== 'PRE') {
                    el.style.cssText = 'background: #f6f6f6; color: #c7254e; padding: 2px 6px; border-radius: 4px; font-family: "SF Mono", Monaco, "Courier New", monospace; font-size: 14px;';
                }
            });

            // è¡¨æ ¼æ ·å¼
            container.querySelectorAll('table').forEach(el => {
                el.style.cssText = 'width: 100%; border-collapse: collapse; margin: 20px 0; font-size: 15px;';
            });

            container.querySelectorAll('th').forEach(el => {
                el.style.cssText = 'background: #2d8cf0; color: white; padding: 12px; text-align: left; font-weight: bold;';
            });

            container.querySelectorAll('td').forEach(el => {
                el.style.cssText = 'padding: 10px 12px; border-bottom: 1px solid #e8e8e8;';
            });

            container.querySelectorAll('tr:nth-child(even)').forEach(el => {
                el.style.cssText = 'background: #f9f9f9;';
            });

            // å¼•ç”¨å—æ ·å¼
            container.querySelectorAll('blockquote').forEach(el => {
                el.style.cssText = 'background: linear-gradient(135deg, #e8f4fc 0%, #f0f9ff 100%); border-left: 4px solid #2d8cf0; border-radius: 8px; padding: 16px 20px; margin: 20px 0;';
            });

            // åˆ†éš”çº¿æ ·å¼
            container.querySelectorAll('hr').forEach(el => {
                el.style.cssText = 'border: none; height: 1px; background: linear-gradient(to right, transparent, #2d8cf0, transparent); margin: 28px 0;';
            });

            // é“¾æ¥æ ·å¼
            container.querySelectorAll('a').forEach(el => {
                el.style.cssText = 'color: #2d8cf0; text-decoration: none;';
            });
        }

        // æ˜¾ç¤ºæç¤º
        function showToast() {
            toast.classList.add('show');
            setTimeout(() => {
                toast.classList.remove('show');
            }, 2500);
        }

        // ç§»åŠ¨ç«¯ Tab åˆ‡æ¢
        function switchTab(tab) {
            const tabInput = document.getElementById('tab-input');
            const tabPreview = document.getElementById('tab-preview');
            const panelInput = document.getElementById('panel-input');
            const panelPreview = document.getElementById('panel-preview');

            if (tab === 'input') {
                tabInput.classList.add('active');
                tabPreview.classList.remove('active');
                panelInput.classList.add('active');
                panelPreview.classList.remove('active');
            } else {
                tabInput.classList.remove('active');
                tabPreview.classList.add('active');
                panelInput.classList.remove('active');
                panelPreview.classList.add('active');
            }
        }

        // åœ¨æ¡Œé¢ç«¯æ˜¾ç¤ºä¸¤ä¸ªé¢æ¿
        function handleResize() {
            const isMobile = window.innerWidth <= 768;
            const panelInput = document.getElementById('panel-input');
            const panelPreview = document.getElementById('panel-preview');

            if (!isMobile) {
                panelInput.classList.add('active');
                panelPreview.classList.add('active');
            }
        }

        window.addEventListener('resize', handleResize);
        handleResize();

        // ç²˜è´´å†…å®¹åŠŸèƒ½
        async function pasteFromClipboard() {
            try {
                const text = await navigator.clipboard.readText();
                if (text) {
                    input.value = text;
                    input.dispatchEvent(new Event('input'));
                    // Show success toast
                    toast.innerHTML = 'âœ… å†…å®¹å·²ç²˜è´´ï¼';
                    showToast();
                    setTimeout(() => {
                        toast.innerHTML = 'âœ… å·²å¤åˆ¶ï¼ç²˜è´´åˆ°å…¬ä¼—å·å³å¯';
                    }, 3000);
                } else {
                    alert('å‰ªè´´æ¿ä¸ºç©ºï¼Œè¯·å…ˆå¤åˆ¶å†…å®¹');
                }
            } catch (error) {
                // Fallback: focus textarea for manual paste
                input.focus();
                alert('è¯·ä½¿ç”¨ Cmd+V (Mac) æˆ– Ctrl+V (Windows) ç²˜è´´å†…å®¹');
            }
        }

        // ç§»åŠ¨ç«¯æ»‘åŠ¨åˆ‡æ¢ Tab
        let touchStartX = 0;
        let touchEndX = 0;
        const swipeThreshold = 50; // æœ€å°æ»‘åŠ¨è·ç¦»

        function handleSwipe() {
            const diff = touchEndX - touchStartX;
            const isMobile = window.innerWidth <= 768;

            if (!isMobile) return;

            if (Math.abs(diff) < swipeThreshold) return;

            if (diff > 0) {
                // å‘å³æ»‘åŠ¨ - åˆ‡æ¢åˆ°è¾“å…¥
                switchTab('input');
            } else {
                // å‘å·¦æ»‘åŠ¨ - åˆ‡æ¢åˆ°é¢„è§ˆ
                switchTab('preview');
            }
        }

        const editorContainer = document.querySelector('.editor-container');

        editorContainer.addEventListener('touchstart', (e) => {
            touchStartX = e.changedTouches[0].screenX;
        }, { passive: true });

        editorContainer.addEventListener('touchend', (e) => {
            touchEndX = e.changedTouches[0].screenX;
            handleSwipe();
        }, { passive: true });

        // ä¸»é¢˜åˆ‡æ¢
        function toggleTheme() {
            const body = document.body;
            const themeBtn = document.getElementById('theme-toggle');

            if (body.classList.contains('dark')) {
                body.classList.remove('dark');
                themeBtn.innerHTML = 'ğŸŒ™ å¤œé—´æ¨¡å¼';
                localStorage.setItem('theme', 'light');
            } else {
                body.classList.add('dark');
                themeBtn.innerHTML = 'â˜€ï¸ æ—¥é—´æ¨¡å¼';
                localStorage.setItem('theme', 'dark');
            }
        }

        // åˆå§‹åŒ–ä¸»é¢˜
        (function initTheme() {
            const savedTheme = localStorage.getItem('theme');
            const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
            const themeBtn = document.getElementById('theme-toggle');

            if (savedTheme === 'dark' || (!savedTheme && prefersDark)) {
                document.body.classList.add('dark');
                themeBtn.innerHTML = 'â˜€ï¸ æ—¥é—´æ¨¡å¼';
            }
        })();
    </script>
</body>

</html>